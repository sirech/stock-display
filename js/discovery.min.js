(function(){function i(){var a=$("#title div #title_field");a.val(getTitle());a.val()!==getDefaultTitle()&&a.removeClass("example");a.focus(function(){a.val()===getDefaultTitle()&&a.removeClass("example").val("")}).blur(function(){a.val()===""&&a.addClass("example").val(getDefaultTitle())}).keyup(function(){store("title",a.val())});$("#search_field").focus(function(){$(this).removeClass("example").val("")}).blur(function(){$(this).addClass("example").val(chrome.i18n.getMessage("example",["Apple"]))})}
function f(){var a=[];$("#stocks ul .stock").each(function(c,b){var d={id:$(b).find(".stock_id").text(),name:$(b).find(".stock_name").text()};a.push(d)});storeStocks(a)}function j(a){a.fadeOut("slow",function(){a.remove();f()})}function g(a,c){var b=k.template.clone();b.find(".stock_name").html(a.name);b.find(".stock_id").html(a.id);b.find(".delete").click(function(){j($(this).parent());return false});$("#stocks ul").append(b);b.fadeIn("slow");c&&f()}function l(){var a,c;a=loadStocks();for(c=0;c<
a.length;c++)g(a[c],false)}function m(a,c){a($.map(c,function(b){return{label:b.name+" ("+b.symbol+")"+(b.exchDisp?" in "+b.exchDisp:""),value:{id:b.symbol,name:b.name}}}))}function n(){$("#search_field").autocomplete({source:function(a,c){$.get("http://stockdisplay.hceris.com",{q:a.term},function(b){m(c,b)})},select:function(a,c){var b=c.item.value,d;a:{d=b.id;var e,h=loadStocks();for(e=0;e<h.length;e++)if(h[e].id===d){d=true;break a}d=false}d||g(b,true);$("#search_field").val(b.name);return false},
focus:function(a,c){var b=c.item.value;$("#search_field").val(b.name);return false},open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")}})}function o(){var a;a=loadStocks();return $.map(a,function(c){return escape(c.id)}).join(",")}function p(){$("#export").button({label:chrome.i18n.getMessage("export"),icons:{primary:"ui-icon-gear"}}).click(function(){var a;a=o();a=chrome.extension.getURL("import.html")+
"?stocks="+a;$("#export_url").val(a);return false})}var k={template:stockConfigTemplate()};jQuery(function(){$("#stocks ul").sortable({handle:".handle",update:function(){f()}}).disableSelection();document.title=chrome.i18n.getMessage("options_title",[chrome.i18n.getMessage("extension_name")]);$("#title div #give_title").text(chrome.i18n.getMessage("give_title"));$("#stocks_header div #start").text(chrome.i18n.getMessage("start"));$("#stocks_header div #search_field").val(chrome.i18n.getMessage("example",
["Apple"]));$("#bookmark #help_export").text(chrome.i18n.getMessage("help_export"));$("#usage #help_start").text(chrome.i18n.getMessage("help_start"));$("#usage #help_comp").text(chrome.i18n.getMessage("help_comp"));$("#usage #help_drag").text(chrome.i18n.getMessage("help_drag"));i();l();n();p()})})();
